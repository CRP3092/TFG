{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import config from\"../utils/config\";import\"../styles/styles.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[credentials,setCredentials]=useState({email:\"\",password:\"\"});const[errorMessage,setErrorMessage]=useState(\"\");const navigate=useNavigate();const handleChange=e=>{setCredentials({...credentials,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();setErrorMessage(\"\");try{const response=await fetch(`${config.API_URL}/login`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(credentials)});if(!response.ok){const{message}=await response.json();throw new Error(message||\"Error al iniciar sesi√≥n.\");}const{accessToken,refreshToken}=await response.json();sessionStorage.setItem(\"accessToken\",accessToken);localStorage.setItem(\"refreshToken\",refreshToken);navigate(\"/index\");// ‚úÖ Ahora redirige al Index tras iniciar sesi√≥n\n}catch(error){setErrorMessage(error.message);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Iniciar Sesi\\xF3n\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Correo\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Contrase\\xF1a\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Ingresar\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"No tienes cuenta? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Reg\\xEDstrate aqu\\xED\"})]}),\" \"]});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","config","jsx","_jsx","jsxs","_jsxs","Login","credentials","setCredentials","email","password","errorMessage","setErrorMessage","navigate","handleChange","e","target","name","value","handleSubmit","preventDefault","response","fetch","API_URL","method","headers","body","JSON","stringify","ok","message","json","Error","accessToken","refreshToken","sessionStorage","setItem","localStorage","error","children","className","onSubmit","type","placeholder","onChange","required","href"],"sources":["C:/wamp64/www/BlockBuster/frontend/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport config from \"../utils/config\";\r\nimport \"../styles/styles.css\";\r\n\r\nconst Login = () => {\r\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" });\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setErrorMessage(\"\");\r\n\r\n    try {\r\n      const response = await fetch(`${config.API_URL}/login`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(credentials),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const { message } = await response.json();\r\n        throw new Error(message || \"Error al iniciar sesi√≥n.\");\r\n      }\r\n\r\n      const { accessToken, refreshToken } = await response.json();\r\n      sessionStorage.setItem(\"accessToken\", accessToken);\r\n      localStorage.setItem(\"refreshToken\", refreshToken);\r\n\r\n      navigate(\"/index\"); // ‚úÖ Ahora redirige al Index tras iniciar sesi√≥n\r\n    } catch (error) {\r\n      setErrorMessage(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Iniciar Sesi√≥n</h2>\r\n      {errorMessage && <p className=\"error-message\">{errorMessage}</p>}\r\n      <form onSubmit={handleSubmit}>\r\n        <input type=\"email\" name=\"email\" placeholder=\"Correo\" onChange={handleChange} required />\r\n        <input type=\"password\" name=\"password\" placeholder=\"Contrase√±a\" onChange={handleChange} required />\r\n        <button type=\"submit\">Ingresar</button>\r\n      </form>\r\n      <p>No tienes cuenta? <a href=\"/register\">Reg√≠strate aqu√≠</a></p> {/* üîπ Nueva opci√≥n para usuarios no registrados */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
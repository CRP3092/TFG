{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\BlockBuster\\\\frontend\\\\src\\\\pages\\\\UserProfile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport config from \"../utils/config\";\nimport \"../styles/userProfile.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserProfile = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [userData, setUserData] = useState(null);\n  const [favoriteItems, setFavoriteItems] = useState([]);\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      try {\n        const response = await fetch(`${config.API_URL}/api/usuario/${id}`);\n        if (!response.ok) {\n          console.error(\"Respuesta no OK, status:\", response.status);\n        }\n        const data = await response.json();\n        console.log(\"📌 Datos de usuario obtenidos desde API:\", data);\n        setUserData(data);\n      } catch (error) {\n        console.error(\"❌ Error al cargar perfil de usuario:\", error);\n      }\n    };\n    fetchUserProfile();\n  }, [id]);\n  useEffect(() => {\n    const fetchFavorites = async () => {\n      if (userData && userData.Favorites) {\n        const favIds = userData.Favorites.split(\",\").map(fav => fav.trim()).filter(fav => fav !== \"\");\n        console.log(\"📌 IDs de favoritos obtenidos:\", favIds);\n        const favPromises = favIds.map(async favId => {\n          let item = null;\n          try {\n            const resMovie = await fetch(`${config.API_URL}/api/movies/${favId}`);\n            if (resMovie.ok) {\n              const dataMovie = await resMovie.json();\n              item = {\n                ...dataMovie,\n                type: \"movie\"\n              };\n            }\n          } catch (e) {\n            console.error(`❌ Error al cargar película con ID ${favId}:`, e);\n          }\n          if (!item) {\n            try {\n              const resSeries = await fetch(`${config.API_URL}/api/series/${favId}`);\n              if (resSeries.ok) {\n                const dataSeries = await resSeries.json();\n                item = {\n                  ...dataSeries,\n                  type: \"series\"\n                };\n              }\n            } catch (e) {\n              console.error(`❌ Error al cargar serie con ID ${favId}:`, e);\n            }\n          }\n          return item;\n        });\n        const favResults = await Promise.all(favPromises);\n        setFavoriteItems(favResults.filter(item => item !== null));\n        console.log(\"✅ Lista final de favoritos:\", favResults.filter(item => item !== null));\n      }\n    };\n    fetchFavorites();\n  }, [userData]);\n  if (!userData) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading\",\n      children: \"Cargando perfil...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"userProfile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: userData.Name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: userData.Email\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Favoritos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"favorites-gallery\",\n      children: favoriteItems.length > 0 ? favoriteItems.map((fav, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `${config.API_URL}${fav.Image}`,\n        alt: fav.Title || \"Favorito\",\n        className: \"favorite-image\"\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No tienes favoritos.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProfile, \"p4ac6gGpIJRdDNh4Tf1ulxF4qxE=\", false, function () {\n  return [useParams];\n});\n_c = UserProfile;\nexport default UserProfile;\nvar _c;\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useState","useEffect","useParams","config","jsxDEV","_jsxDEV","UserProfile","_s","id","userData","setUserData","favoriteItems","setFavoriteItems","fetchUserProfile","response","fetch","API_URL","ok","console","error","status","data","json","log","fetchFavorites","Favorites","favIds","split","map","fav","trim","filter","favPromises","favId","item","resMovie","dataMovie","type","e","resSeries","dataSeries","favResults","Promise","all","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Name","Email","length","index","src","Image","alt","Title","_c","$RefreshReg$"],"sources":["C:/wamp64/www/BlockBuster/frontend/src/pages/UserProfile.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport config from \"../utils/config\";\r\nimport \"../styles/userProfile.css\";\r\n\r\nconst UserProfile = () => {\r\n  const { id } = useParams();\r\n  const [userData, setUserData] = useState(null);\r\n  const [favoriteItems, setFavoriteItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchUserProfile = async () => {\r\n      try {\r\n        const response = await fetch(`${config.API_URL}/api/usuario/${id}`);\r\n        if (!response.ok) {\r\n          console.error(\"Respuesta no OK, status:\", response.status);\r\n        }\r\n        const data = await response.json();\r\n        console.log(\"📌 Datos de usuario obtenidos desde API:\", data);\r\n        setUserData(data);\r\n      } catch (error) {\r\n        console.error(\"❌ Error al cargar perfil de usuario:\", error);\r\n      }\r\n    };\r\n\r\n    fetchUserProfile();\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const fetchFavorites = async () => {\r\n      if (userData && userData.Favorites) {\r\n        const favIds = userData.Favorites.split(\",\").map(fav => fav.trim()).filter(fav => fav !== \"\");\r\n\r\n        console.log(\"📌 IDs de favoritos obtenidos:\", favIds);\r\n\r\n        const favPromises = favIds.map(async (favId) => {\r\n          let item = null;\r\n          try {\r\n            const resMovie = await fetch(`${config.API_URL}/api/movies/${favId}`);\r\n            if (resMovie.ok) {\r\n              const dataMovie = await resMovie.json();\r\n              item = { ...dataMovie, type: \"movie\" };\r\n            }\r\n          } catch (e) {\r\n            console.error(`❌ Error al cargar película con ID ${favId}:`, e);\r\n          }\r\n          if (!item) {\r\n            try {\r\n              const resSeries = await fetch(`${config.API_URL}/api/series/${favId}`);\r\n              if (resSeries.ok) {\r\n                const dataSeries = await resSeries.json();\r\n                item = { ...dataSeries, type: \"series\" };\r\n              }\r\n            } catch (e) {\r\n              console.error(`❌ Error al cargar serie con ID ${favId}:`, e);\r\n            }\r\n          }\r\n          return item;\r\n        });\r\n\r\n        const favResults = await Promise.all(favPromises);\r\n        setFavoriteItems(favResults.filter(item => item !== null));\r\n\r\n        console.log(\"✅ Lista final de favoritos:\", favResults.filter(item => item !== null));\r\n      }\r\n    };\r\n\r\n    fetchFavorites();\r\n  }, [userData]);\r\n\r\n  if (!userData) {\r\n    return <p className=\"loading\">Cargando perfil...</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"userProfile-container\">\r\n      <h2>{userData.Name}</h2>\r\n      <p>{userData.Email}</p>\r\n      <h3>Favoritos</h3>\r\n      <div className=\"favorites-gallery\">\r\n        {favoriteItems.length > 0 ? (\r\n          favoriteItems.map((fav, index) => (\r\n            <img key={index} src={`${config.API_URL}${fav.Image}`} alt={fav.Title || \"Favorito\"} className=\"favorite-image\" />\r\n          ))\r\n        ) : (\r\n          <p>No tienes favoritos.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}